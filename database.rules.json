{
  "rules": {
    ".read": true,
    ".write": false,

    "courseAssessments": {
      "$courseId": {
        "$assessmentId": {
          ".write": "auth != null && (root.child('courses').child($courseId).child('userId').val() === auth.uid || root.child('users').child(auth.uid).child('role').val() === 'admin')",
          ".read": "auth != null && (root.child('courses').child($courseId).child('userId').val() === auth.uid || data.child('userId').val() === auth.uid)"
        }
      }
    },

    "courseMaterials": {
      "$courseId": {
        ".read": true,
        "$materialId": {
          ".write": "auth != null && (root.child('courses').child($courseId).child('userId').val() === auth.uid || root.child('users').child(auth.uid).child('role').val() === 'admin')"
        }
      }
    },

    "courseQuizzes": {
      "$courseId": {
        ".read": true,
        "$quizId": {
          ".write": "auth != null && (root.child('courses').child($courseId).child('userId').val() === auth.uid || root.child('users').child(auth.uid).child('role').val() === 'admin')"
        }
      }
    },

    "courseSlides": {
      "$courseId": {
        ".read": true,
        "$slideId": {
          ".write": "auth != null && (root.child('courses').child($courseId).child('userId').val() === auth.uid || root.child('users').child(auth.uid).child('role').val() === 'admin')"
        }
      }
    },

    "courseVideos": {
      "$courseId": {
        ".read": true,
        "$videoId": {
          ".write": "auth != null && (root.child('courses').child($courseId).child('userId').val() === auth.uid || root.child('users').child(auth.uid).child('role').val() === 'admin')"
        }
      }
    },

    "courses": {
      "$courseId": {
        ".read": true,
        ".write": "auth != null && (root.child('users').child(auth.uid).child('role').val() === 'admin' || root.child('users').child(auth.uid).child('role').val() === 'teacher')"
      }
    },

    "customQuizResults": {
      "$courseId": {
        "$quizId": {
          "$userId": {
            ".write": "auth != null && auth.uid === $userId",
            ".read": "auth != null && root.child('courses').child($courseId).child('userId').val() === auth.uid"
          }
        }
      }
    },

    "liveQuizResults": {
      "$courseId": {
        "$quizId": {
          "$userId": {
            ".write": "auth != null && auth.uid === $userId",
            ".read": "auth != null && root.child('courses').child($courseId).child('userId').val() === auth.uid"
          }
        }
      }
    },

    "llmModels": {
      "$modelId": {
        ".read": true,
        ".write": "auth != null && root.child('users').child(auth.uid).child('role').val() === 'admin'"
      }
    },

    "post": {
      "$postId": {
        ".read": true,
        ".write": "auth != null && root.child('users').child(auth.uid).child('role').val() === 'admin'"
      }
    },

    "quizGigi": {
      "$courseId": {
        "$quizId": {
          "$userId": {
            ".write": "auth != null && auth.uid === $userId",
            ".read": "auth != null && root.child('courses').child($courseId).child('userId').val() === auth.uid"
          }
        }
      }
    },

    "quizResults": {
      "$userId": {
        ".write": "auth != null && auth.uid === $userId",
        "$courseId": {
          ".read": "auth != null && root.child('courses').child($courseId).child('userId').val() === auth.uid"
        }
      }
    },

    "reports": {
      ".write": false,
      "$reportId": {
        ".read": true,
        ".write": true
      }
    },

    "studentCourses": {
      "$userId": {
        "$courseId":{
          ".write": "auth != null && (auth.uid === $userId || root.child('courses').child($courseId).child('userId').val() === auth.uid)",
          ".read": true
        }
      }
    },

    "tags": {
      "$tagId": {
        ".read": true,
        ".write": "auth != null && root.child('users').child(auth.uid).child('role').val() === 'admin'"
      }
    },

    "users": {
      ".indexOn": ["email"],
      "$userId": {
        ".read": "auth != null && (auth.uid === $userId || root.child('users').child(auth.uid).child('role').val() === 'admin')",
        ".write": "auth != null && (auth.uid === $userId || (root.child('users').child(auth.uid).child('role').val() === 'admin' && newData.hasChild('role')))"
      }
    },

    "videoProgress": {
      "$userId": {
        ".write": "auth != null && auth.uid === $userId",
        ".read": true
      }
    }
  }
}
